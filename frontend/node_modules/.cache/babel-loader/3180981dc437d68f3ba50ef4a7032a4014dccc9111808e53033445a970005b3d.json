{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axiosInstance from './axiosInstance';\nimport { useAuth } from '../auth/useAuth';\nconst AxiosInterceptor = () => {\n  _s();\n  const {\n    auth,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const requestInterceptor = axiosInstance.interceptors.request.use(config => {\n      if (auth !== null && auth !== void 0 && auth.token) {\n        config.headers.Authorization = `Bearer ${auth.token}`;\n      }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n    const responseInterceptor = axiosInstance.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        logout();\n        navigate('/login');\n      }\n      return Promise.reject(error);\n    });\n    return () => {\n      axiosInstance.interceptors.request.eject(requestInterceptor);\n      axiosInstance.interceptors.response.eject(responseInterceptor);\n    };\n  }, [auth, logout, navigate]);\n  return null;\n};\n_s(AxiosInterceptor, \"PdqJb0rs/VglZ9rj9x1ySF3qA4k=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = AxiosInterceptor;\nexport default AxiosInterceptor;\nvar _c;\n$RefreshReg$(_c, \"AxiosInterceptor\");","map":{"version":3,"names":["useEffect","useNavigate","axiosInstance","useAuth","AxiosInterceptor","_s","auth","logout","navigate","requestInterceptor","interceptors","request","use","config","token","headers","Authorization","error","Promise","reject","responseInterceptor","response","_error$response","status","eject","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/OneDrive/Documents/Arvidion/bbb Magang/aaa Project/Log-Book-Keamanan/frontend/src/api/axiosInterceptor.js"],"sourcesContent":["import { useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axiosInstance from './axiosInstance';\r\nimport { useAuth } from '../auth/useAuth';\r\n\r\nconst AxiosInterceptor = () => {\r\n  const { auth, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const requestInterceptor = axiosInstance.interceptors.request.use(\r\n      (config) => {\r\n        if (auth?.token) {\r\n          config.headers.Authorization = `Bearer ${auth.token}`;\r\n        }\r\n        return config;\r\n      },\r\n      (error) => {\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    const responseInterceptor = axiosInstance.interceptors.response.use(\r\n      (response) => response,\r\n      (error) => {\r\n        if (error.response?.status === 401) {\r\n          logout();\r\n          navigate('/login');\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      axiosInstance.interceptors.request.eject(requestInterceptor);\r\n      axiosInstance.interceptors.response.eject(responseInterceptor);\r\n    };\r\n  }, [auth, logout, navigate]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default AxiosInterceptor; "],"mappings":";AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,iBAAiB;AAEzC,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,MAAM;IAAEC,IAAI;IAAEC;EAAO,CAAC,GAAGJ,OAAO,CAAC,CAAC;EAClC,MAAMK,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMS,kBAAkB,GAAGP,aAAa,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9DC,MAAM,IAAK;MACV,IAAIP,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEQ,KAAK,EAAE;QACfD,MAAM,CAACE,OAAO,CAACC,aAAa,GAAG,UAAUV,IAAI,CAACQ,KAAK,EAAE;MACvD;MACA,OAAOD,MAAM;IACf,CAAC,EACAI,KAAK,IAAK;MACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CACF,CAAC;IAED,MAAMG,mBAAmB,GAAGlB,aAAa,CAACQ,YAAY,CAACW,QAAQ,CAACT,GAAG,CAChES,QAAQ,IAAKA,QAAQ,EACrBJ,KAAK,IAAK;MAAA,IAAAK,eAAA;MACT,IAAI,EAAAA,eAAA,GAAAL,KAAK,CAACI,QAAQ,cAAAC,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;QAClChB,MAAM,CAAC,CAAC;QACRC,QAAQ,CAAC,QAAQ,CAAC;MACpB;MACA,OAAOU,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;IAC9B,CACF,CAAC;IAED,OAAO,MAAM;MACXf,aAAa,CAACQ,YAAY,CAACC,OAAO,CAACa,KAAK,CAACf,kBAAkB,CAAC;MAC5DP,aAAa,CAACQ,YAAY,CAACW,QAAQ,CAACG,KAAK,CAACJ,mBAAmB,CAAC;IAChE,CAAC;EACH,CAAC,EAAE,CAACd,IAAI,EAAEC,MAAM,EAAEC,QAAQ,CAAC,CAAC;EAE5B,OAAO,IAAI;AACb,CAAC;AAACH,EAAA,CAnCID,gBAAgB;EAAA,QACKD,OAAO,EACfF,WAAW;AAAA;AAAAwB,EAAA,GAFxBrB,gBAAgB;AAqCtB,eAAeA,gBAAgB;AAAC,IAAAqB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}